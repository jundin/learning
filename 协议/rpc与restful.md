## RPC框架
在一个典型 RPC 的使用场景中，包含了服务发现、负载、容错、网络传输、序列化等组件，其中“RPC 协议”就指明了程序如何进行网络传输和序列化。

### RPC 的核心功能
客户端、客户端 Stub、网络传输模块、服务端 Stub、服务端等。

- 客户端(Client)：服务调用方。
- 客户端存根(Client Stub)：存放服务端地址信息，将客户端的请求参数数据信息打包成网络消息，再通过网络传输发送给服务端。
- 服务端存根(Server Stub)：接收客户端发送过来的请求消息并进行解包，然后再调用本地服务进行处理。
- 服务端(Server)：服务的真正提供者。
- Network Service：底层传输，可以是 TCP 或 HTTP。

### RPC 核心之功能实现
- 服务寻址
- 数据流的序列化和反序列化
- 网络传输

### gRPC
gRPC：是 Google 公布的开源软件，基于 HTTP 2.0 协议，并支持常见的众多编程语言。
RPC 框架是基于 HTTP 协议实现的，底层使用到了 Netty 框架的支持。

### RESTFUL 与RPC的区别
1.restfull和rpc都是client/server模式的，都是在 Server端 把一个个函数封装成接口暴露出去

2.restful使用http协议实现，而rpc则不一定使用http，一般比较常用的是tcp， RPC 可以获得更好的性能（省去了 HTTP 报头等一系列东西）,TCP更加高效，而HTTP在实际应用中更加的灵活。

3.从使用上来说：Http接口只关注服务提供方（服务端），对于客户端怎么调用，调用方式怎样并不关心；而RPC服务则需要客户端接口与服务端保持一致，服务端提供一个方法，客户端通过接口直接发起调用。

>而在微服务内部的各模块之间因为各协议方案是公司内部自己定的，所以知道各种数据方式，可以使用TCP传输以使各模块之间的数据传输更快。
所以可以网关和外界的数据传输使用RESTFUL，微服务内部的各模块之间使用RPC。

**多系统之间的内部调用采用RPC。对外提供的服务，Rest更加合适**

